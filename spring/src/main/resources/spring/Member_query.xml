<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.ssafy.project.dao.MemberDao" >
   	
   	<insert id="insertMember" parameterType="member">
   		insert into mem_info(mem_id, mem_email, mem_pw, mem_nick, mem_reg_date)
   		values(#{mem_id},#{mem_email},#{mem_pw},#{mem_nick}, now())
   	</insert>
   	
   	<insert id="grantMember" parameterType="string">
   		insert into mem_option(mem_id, mem_auth, mem_post_def, mem_secret)
   		values(#{mem_id}, 1, 1, 0)
   	</insert>
   	
   	<select id="searchAll" resultType="member">
  		select * 
  		from mem_info
  	</select>
  	
  	<select id="searchIdLike" parameterType="string" resultType="member">
		select *
		from mem_info
		where mem_id LIKE '%'||#{mem_id}||'%'
	</select>
	
	<select id="searchNickLike" parameterType="string" resultType="member">
		select *
		from mem_info
		where mem_nick LIKE '%'||#{mem_nick}||'%'
	</select>
	  	
  	<select id="search" parameterType="string" resultType="member">
		select * 
		from mem_info
		where mem_id = #{mem_id}
	</select>
	
	<update id="updateMember" parameterType="member">
		update mem_info
		set
		mem_email = #{mem_email}, 
		mem_pw = #{mem_pw},
		mem_nick = #{mem_nick}
		where mem_id = #{mem_id}		
	</update>
	
	<update id="releaseMember" parameterType="string">
		update mem_option
		set 
		mem_auth = 1
		where mem_id = #{mem_id}
	</update>
  	
  	<update id="freezeMember" parameterType="string">
		update mem_option
		set 
		mem_auth = 2
		where mem_id = #{mem_id}
	</update>
  	
  	<update id="deleteMember" parameterType="string">
		update mem_option
		set 
		mem_auth = 3
		where mem_id = #{mem_id}
	</update>
  	
</mapper>